/// <reference types="node" />
import Clock from "@gamestdio/timer";
import { EventEmitter } from "events";
import { Timeline } from "@gamestdio/timeline";
import { Client } from "./index";
export declare abstract class Room<T = any> extends EventEmitter {
    clock: Clock;
    timeline?: Timeline;
    roomId: string;
    roomName: string;
    clients: Client[];
    maxClients: number;
    patchRate: number;
    autoDispose: boolean;
    state: T;
    connectingClients: {
        [clientId: string]: any;
    };
    protected _previousState: any;
    protected _previousStateEncoded: any;
    private _simulationInterval;
    private _patchInterval;
    constructor();
    abstract onMessage(client: Client, data: any): void;
    onInit?(options: any): void;
    onJoin?(client: Client, options?: any): void | Promise<any>;
    onLeave?(client: Client): void | Promise<any>;
    onDispose?(): void | Promise<any>;
    requestJoin(options: any, isNew?: boolean): number | boolean;
    verifyClient(client: Client, options: any): boolean | Promise<any>;
    readonly maxClientsReached: boolean;
    setSimulationInterval(callback: Function, delay?: number): void;
    setPatchRate(milliseconds: number): void;
    useTimeline(maxSnapshots?: number): void;
    setState(newState: any): void;
    lock(): void;
    unlock(): void;
    send(client: Client, data: any): void;
    broadcast(data: any): boolean;
    disconnect(): Promise<any>;
    protected sendState(client: Client): void;
    private broadcastPatch();
    private _onJoin(client, options?);
    private _onLeave(client, isDisconnect?);
    protected _disposeIfEmpty(): void;
    protected _dispose(): Promise<any>;
}
